# 满汉助手 - 悬浮窗版本

## 🎯 简介

这是满汉助手的悬浮窗版本，专为手机使用设计：

- ✅ **极简悬浮窗界面** - 只有180x120像素的小窗口
- ✅ **完整保留原版算法** - 所有游戏逻辑完全一致
- ✅ **一键开始/暂停** - 简单的控制操作
- ✅ **实时状态显示** - 步数、分数、运行状态
- ✅ **自适应分辨率** - 支持各种手机屏幕

## 📱 界面预览

```
┌─────────────────┐
│    满汉助手     │
├─────────────────┤
│   运行中        │
│ 步:15   分:850  │
│   [  暂停  ]    │
│ [设置] [退出]   │
└─────────────────┘
```

## 🚀 快速构建

### 方法1: GitHub Actions (推荐)

1. **设置GitHub仓库**
   ```bash
   git init
   git add .
   git commit -m "悬浮窗版本"
   git remote add origin https://github.com/YOUR_USERNAME/mhcs-floating.git
   git push -u origin main
   ```

2. **自动构建**
   - GitHub Actions会自动构建APK
   - 在"Actions"标签查看进度
   - 完成后下载APK文件

### 方法2: 本地构建

```powershell
# 运行悬浮窗构建脚本
powershell -ExecutionPolicy Bypass -File build-floating.ps1
```

## 📋 文件结构

```
悬浮窗版本/
├── floating_main.py          # 悬浮窗主程序
├── mobile_game_engine.py     # 完整游戏引擎
├── buildozer.spec           # 构建配置
├── build-floating.ps1       # 构建脚本
└── model/
    └── best.pt             # YOLO模型文件
```

## 🎮 使用方法

### 安装
1. 下载构建好的APK
2. 在Android设备上安装
3. 启动应用

### 设置权限
1. 点击"设置"按钮
2. 在系统设置中启用无障碍服务
3. 返回应用

### 开始使用
1. 打开目标游戏
2. 点击悬浮窗中的"开始"按钮
3. 应用会自动运行
4. 可随时点击"暂停"/"继续"

## 🔧 悬浮窗功能

### 主按钮
- **开始** - 启动自动化
- **暂停** - 暂停运行
- **继续** - 恢复运行

### 状态显示
- **顶部文字** - 当前运行状态
- **步数** - 已执行的步数
- **分数** - 当前获得分数

### 底部按钮
- **设置** - 打开无障碍服务设置
- **退出** - 关闭应用

## ⚙️ 技术特性

### 完整算法保留
- 与原版PC版本算法100%一致
- 相同的YOLO模型推理
- 相同的消除策略算法
- 相同的评估函数

### 悬浮窗特性
- 固定180x120像素大小
- 始终显示在最前面
- 不影响游戏操作
- 低内存占用

### 自适应支持
- 自动检测设备分辨率
- 自动计算棋盘位置
- 支持竖屏/横屏切换

## 🐛 常见问题

### Q: 悬浮窗不显示？
A: 检查是否授予了"显示在其他应用上层"权限

### Q: 无法控制游戏？
A: 确保已启用无障碍服务权限

### Q: 识别不准确？
A: 确保模型文件model/best.pt存在且有效

### Q: 应用崩溃？
A: 检查设备内存是否充足，建议2GB+

## 📊 性能数据

- **APK大小**: ~15-20MB
- **内存占用**: ~50-80MB
- **CPU使用**: 中等 (主要在推理时)
- **电池消耗**: 中等 (建议充电时使用)

## 🔄 更新说明

### v1.0 悬浮窗版本
- 极简悬浮窗界面
- 完整保留原版算法
- 支持一键开始/暂停
- 实时状态显示

## 📞 支持

如有问题：
1. 查看应用日志
2. 检查权限设置
3. 确认模型文件
4. 重启应用尝试

---

**注意**: 使用时请遵守游戏服务条款，合理使用自动化功能。
